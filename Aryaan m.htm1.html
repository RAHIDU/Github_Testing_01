<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aryaan </title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Great+Vibes&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: 'Great Vibes', cursive;
            color: white;
            height: 100vh;
            background: #000;
        }

        /* COUNTDOWN PAGE */
        #countdown-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }

        #countdown-container {
            position: relative;
            width: 300px;
            height: 300px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 40px;
        }

        #countdown-circle {
            position: absolute;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            border: 4px solid rgba(255, 0, 0, 0.5);
            box-shadow: 0 0 40px rgba(255, 0, 0, 0.7);
            animation: pulse-glow 1.00s infinite alternate;
        }

        @keyframes pulse-glow {
            0% {
                box-shadow: 0 0 40px rgba(255, 0, 0, 0.7);
                border: 4px solid rgba(255, 0, 0, 0.5);
            }
            100% {
                box-shadow: 0 0 60px rgba(255, 0, 100, 0.9), 
                           0 0 90px rgba(255, 50, 150, 0.7),
                           0 0 120px rgba(255, 100, 200, 0.5);
                border: 3px solid rgba(255, 100, 200, 0.8);
            }
        }

        #countdown {
            font-size: 5rem;
            font-weight: bold;
            color: #ff0000;
            text-shadow: 0 0 15px #ff0000;
            z-index: 10;
            animation: text-glow 2.00s infinite alternate;
        }

        @keyframes text-glow {
            0% {
                text-shadow: 0 0 15px #ff0000;
            }
            100% {
                text-shadow: 0 0 25px #ff0099, 
                             0 0 35px #ff00ff;
            }
        }

        .heart {
            position: absolute;
            font-size: 90px;
            color: #ff0000;
            animation: floatHeart 1.0s linear infinite;
            opacity: 0;
            z-index: 10;
        }

        @keyframes floatHeart {
            0% {
                transform: translate(0, 0) scale(0.5);
                opacity: 0;
            }
            10% {
                opacity: 4;
            }
            90% {
                opacity: 4;
            }
            100% {
                transform: translate(random(300) - 150 + 'px', -300px) scale(1.0);
                opacity: 0;
            }
        }

        /* Button Container */
        #button-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 20px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 15;
        }

        /* Modified Ready Button */
        #ready-btn {
            padding: 15px 10px;
            font-size: 1.8rem;
            background: linear-gradient(45deg, #ff0066, #ff33cc, #ff66ff);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            opacity: 0;
            transform: scale(0.5);
            transition: all 0.5s ease;
            box-shadow: 0 0 25px rgba(255, 0, 255, 0.7);
            font-family: 'Dancing Script', cursive;
            width: 200px;
            height: 80px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #ready-btn:hover {
            background: linear-gradient(45deg, #ff3399, #ff66ff, #ff99ff);
            transform: scale(1.1);
            box-shadow: 0 0 35px rgba(255, 102, 255, 0.9);
        }

        /* Yes/No Buttons */
        .side-btn {
            padding: 15px 25px;
            font-size: 1.8rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            opacity: 0;
            transform: scale(0.5);
            transition: all 0.5s ease;
            font-family: 'Dancing Script', cursive;
            width: 100px;
            height: 80px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #yes-btn {
            background: linear-gradient(45deg, #00cc66, #66ff99);
            box-shadow: 0 0 25px rgba(0, 255, 128, 0.7);
        }

        #yes-btn:hover {
            background: linear-gradient(45deg, #66ff99, #99ffcc);
            transform: scale(1.1);
            box-shadow: 0 0 35px rgba(102, 255, 178, 0.9);
        }

        #no-btn {
            background: linear-gradient(45deg, #ff3300, #ff6633);
            box-shadow: 0 0 25px rgba(255, 51, 0, 0.7);
        }

        #no-btn:hover {
            background: linear-gradient(45deg, #ff6633, #ff9966);
            transform: scale(1.1);
            box-shadow: 0 0 35px rgba(255, 102, 51, 0.9);
        }

        /* CAKE PAGE */
        #cake-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 90;
            background: linear-gradient(135deg, #3341e0 20%, #15d628 100%);
        }

        #cake-container {
            position: relative;
            margin: 20px 0;
            z-index: 20;
        }

        #cake {
            width: 280px;
            height: 160px;
            background: linear-gradient(to bottom, #801a32, #f2789f);
            border-radius: 10px 10px 0 0;
            position: relative;
            box-shadow: 0 0 35px rgba(184, 98, 18, 0.8);
        }

        #cake-top {
            width: 300px;
            height: 45px;
            background: linear-gradient(to bottom,#ed9404, #462501, #b9134d);
            border-radius: 50%;
            position: absolute;
            top: -22px;
            left: -10px;
        }

        .candle {
            position: absolute;
            width: 12px;
            height: 90px;
            background: linear-gradient(to bottom, #fff, #ffeb3b);
            top: -100px;
            border-radius: 6px;
            box-shadow: 0 0 20px #ffeb3b;
        }

        .flame {
            position: absolute;
            width: 18px;
            height: 35px;
            background: linear-gradient(to bottom, #ef1010, #c9e574);
            border-radius: 50% 50% 20% 20%;
            top: -35px;
            left: -3px;
            box-shadow: 0 0 25px #cd8a25;
            animation: flicker 0.3s infinite alternate;
        }

        @keyframes flicker {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(1.1); opacity: 0.6; }
        }

        #blow-instruction {
            font-size: 1.5rem;
            color: #fff;
            margin-top: 30px;
            text-shadow: 0 0 10px #fff;
            font-family: 'Dancing Script', cursive;
            opacity: 0;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 1; }
            100% { opacity: 0.7; }
        }

        /* BIRTHDAY PAGE - ENHANCED WITH BALLOONS AND DECORATIONS */
        #birthday-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 80;
            background: linear-gradient(135deg, #e16eca 20%, #4f4ff6 100%);
            overflow: hidden;
        }

        /* Balloons */
        .balloon {
            position: absolute;
            width: 80px;
            height: 100px;
            border-radius: 50%;
            z-index: 2;
            animation: floatBalln 15s linear infinite;
            opacity: 0.7;
        }

        .balloon:before {
            content: "";
            position: absolute;
            width: 3px;
            height: 50px;
            background: rgba(255,255,255,0.5);
            bottom: -50px;
            left: 50%;
            transform: translateX(-50%);
        }

        @keyframes floatBalloon {
            0% {
                transform: translate(0, 100vh) scale(0.7);
            }
            100% {
                transform: translate(random(200) - 100 + 'px', -150vh) scale(1.2);
            }
        }

        /* Confetti */
        .confetti {
            position: absolute;
            width: 15px;
            height: 15px;
            background: #f00;
            opacity: 0;
            z-index: 2;
            animation: confettiFall 5s linear infinite;
        }

        @keyframes confettiFall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* Fireworks */
        .firework {
            position: absolute;
            width: 30px;
            height: 20px;
            border-radius: 90%;
            box-shadow: 0 0 7px 20px;
            animation: launch 1s ease-out forwards;
            z-index: 07;
        }

        .particle {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 70%;
            animation: explode 1.0s ease-out forwards;
            z-index: 6;
            box-shadow: 0 0 17px 6px;
        }

        @keyframes launch {
            0% { transform: translateY(100vh); opacity: 1; }
            100% { transform: translateY(var(--explode-height)); opacity: 1; }
        }

        @keyframes explode {
            0% { 
                transform: translate(0, 0) scale(1);
                opacity: 1;
            }
            100% { 
                transform: translate(var(--tx), var(--ty)) scale(0);
                opacity: 0;
            }
        }

        /* Birthday Message */
        #birthday-message {
            font-size: 4.5rem;
            margin: 20px;
            font-weight: bold;
            background: linear-gradient(45deg,  #26e32d, #e14f4f, #6a0a06);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient 6s ease infinite;
            position: relative;
            z-index: 10;
            text-align: center;
            font-family: 'Great Vibes', cursive;
            line-height: 1.3;
            text-shadow: 0 0 15px rgba(232, 245, 245, 0.7);
        }

        #blessing {
            font-size: 2.2rem;
            margin: 30px;
            color: #040000;
            text-shadow: 0 0 20px rgba(234, 232, 237, 0.8);
            max-width: 80%;
            line-height: 1.6;
            z-index: 10;
            position: relative;
            text-align: center;
            font-family: 'Dancing Script', cursive;
            opacity: 0;
            transform: translateY(50px);
            transition: all 1s ease;
        }

        /* Signature Styling */
        #from {
            position: absolute;
            bottom: 40px;
            left: 40px;
            font-size: 2.0rem;
            color: #190995;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.9);
            z-index: 10;
            font-family: 'Dancing Script', cursive;
            padding: 15px 25px;
            background: rgba(255,255,255,0.2);
            border-radius: 50px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.3);
            transform: rotate(-5deg);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* COMMON STYLES */
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        /* Music control button */
        #music-control {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            cursor: pointer;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.3);
        }
        
        #music-control i {
            color: white;
            font-size: 24px;
        }

        /* MOBILE RESPONSIVE STYLES */
        @media (max-width: 768px) {
            /* Adjust countdown size */
            #countdown {
                font-size: 3.5rem;
            }
            
            #countdown-container {
                width: 250px;
                height: 250px;
            }
            
            #countdown-circle {
                width: 250px;
                height: 250px;
            }
            
            /* Button adjustments */
            #button-container {
                flex-direction: column;
                gap: 15px;
                width: 100%;
                padding: 0 20px;
                box-sizing: border-box;
            }
            
            #ready-btn, .side-btn {
                width: 100%;
                max-width: 280px;
                height: 70px;
                font-size: 1.5rem;
            }
            
            /* Cake adjustments */
            #cake {
                width: 240px;
                height: 140px;
            }
            
            #cake-top {
                width: 260px;
            }
            
            .candle {
                height: 70px;
                top: -80px;
            }
            
            /* Birthday message adjustments */
            #birthday-message {
                font-size: 2.8rem;
                margin: 10px;
                padding: 0 15px;
                text-align: center;
            }
            
            #blessing {
                font-size: 1.8rem;
                margin: 20px 15px;
            }
            
            #from {
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%) rotate(-5deg);
                font-size: 1.5rem;
                padding: 10px 20px;
            }
            
            /* Blow instruction */
            #blow-instruction {
                font-size: 1.3rem;
                text-align: center;
                padding: 0 20px;
            }
            
            /* Music control */
            #music-control {
                width: 45px;
                height: 45px;
                bottom: 15px;
                right: 15px;
            }
        }

        @media (max-width: 480px) {
            /* Further adjustments for very small screens */
            #birthday-message {
                font-size: 2.2rem;
            }
            
            #blessing {
                font-size: 1.5rem;
            }
            
            .heart {
                font-size: 60px;
            }
            
            /* Button text adjustments */
            #ready-btn {
                font-size: 1.3rem;
            }
            
            .side-btn {
                font-size: 1.3rem;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <!-- COUNTDOWN PAGE -->
    <div id="countdown-page">
        <div id="countdown-container">
            <div id="countdown-circle"></div>
            <div id="countdown">3</div>
            <div id="button-container">
                <button id="no-btn" class="side-btn">No</button>
                <button id="ready-btn">Aryaan 
                               Ready for Surprise!</button>
                <button id="yes-btn" class="side-btn">Yes</button>
            </div>
        </div>
    </div>

    <!-- CAKE PAGE -->
    <div id="cake-page">
        <div id="cake-container">
            <div id="cake">
                <div id="cake-top"></div>
                <div class="candle" style="left: 50%; transform: translateX(-50%);">
                    <div class="flame"></div>
                </div>
                <div class="candle" style="left: 30%; transform: translateX(-50%);">
                    <div class="flame"></div>
                </div>
                <div class="candle" style="left: 70%; transform: translateX(-50%);">
                    <div class="flame"></div>
                </div>
            </div>
            <div id="blow-instruction">Blow on the screen to extinguish the candles!</div>
        </div>
    </div>

    <!-- BIRTHDAY PAGE - ENHANCED -->
    <div id="birthday-page">
        <div id="birthday-message">Happy Birthday Aryaan !</div>
        <div id="blessing">
            May your life be filled with joy, success and countless blessings!<br>
            Wishing you a year ahead as wonderful as you are!
        </div>
        <div id="from">From your's brother Rahid Afridi</div>
    </div>
    
    <!-- Music Control Button -->
    <div id="music-control">
        <i class="fas fa-music"></i>
    </div>

    <!-- AUDIO FILES -->
    <audio id="countdownAudio">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-simple-countdown-922.mp3" type="audio/mpeg">
    </audio>
    <audio id="blowSound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-someone-blowing-out-birthday-candles-479.mp3" type="audio/mpeg">
    </audio>
    <audio id="birthdayAudio" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
    </audio>
    <audio id="voiceAudio">
        <source src="https://www.myinstants.com/media/sounds/happy-birthday-voice.mp3" type="audio/mpeg">
    </audio>
    <audio id="fireworkSound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-explosion-firework-1681.mp3" type="audio/mpeg">
    </audio>
    <audio id="backgroundMusic" loop preload="auto">
        <source src="https://files.catbox.moe/pgquhd.mp3" type="audio/mpeg">
    </audio>
    <audio id="balloonPopSound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-balloon-pop-with-delay-235.mp3" type="audio/mpeg">
    </audio>

    <script>
        // Elements
        const countdownPage = document.getElementById('countdown-page');
        const cakePage = document.getElementById('cake-page');
        const birthdayPage = document.getElementById('birthday-page');
        const countdown = document.getElementById('countdown');
        const readyBtn = document.getElementById('ready-btn');
        const yesBtn = document.getElementById('yes-btn');
        const noBtn = document.getElementById('no-btn');
        const blowInstruction = document.getElementById('blow-instruction');
        const flames = document.querySelectorAll('.flame');
        const countdownContainer = document.getElementById('countdown-container');
        const countdownCircle = document.getElementById('countdown-circle');
        const fireworkSound = document.getElementById('fireworkSound');
        const musicControl = document.getElementById('music-control');
        const balloonPopSound = document.getElementById('balloonPopSound');
        
        // Audio Elements
        const countdownAudio = document.getElementById('countdownAudio');
        const blowSound = document.getElementById('blowSound');
        const birthdayAudio = document.getElementById('birthdayAudio');
        const voiceAudio = document.getElementById('voiceAudio');
        const backgroundMusic = document.getElementById('backgroundMusic');

        // Music control
        let isMusicPlaying = false;
        
        // Initialize audio with user interaction
        function initAudio() {
            backgroundMusic.volume = 0.3;
            const playPromise = backgroundMusic.play();
            
            if (playPromise !== undefined) {
                playPromise.then(_ => {
                    isMusicPlaying = true;
                    musicControl.innerHTML = '<i class="fas fa-pause"></i>';
                })
                .catch(error => {
                    isMusicPlaying = false;
                    musicControl.innerHTML = '<i class="fas fa-play"></i>';
                });
            }
        }
        
        // Enable audio on first interaction
        document.body.addEventListener('click', function() {
            initAudio();
            // Remove this listener after first click
            document.body.removeEventListener('click', arguments.callee);
        });

        // Music control button
        musicControl.addEventListener('click', function() {
            if (isMusicPlaying) {
                backgroundMusic.pause();
                musicControl.innerHTML = '<i class="fas fa-play"></i>';
            } else {
                backgroundMusic.play();
                musicControl.innerHTML = '<i class="fas fa-pause"></i>';
            }
            isMusicPlaying = !isMusicPlaying;
        });

        // Create balloons
        function createBalloons() {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff', '#ff8800', '#8800ff'];
            const balloonShapes = ['', '75% 25%', '66% 33%'];
            
            for (let i = 0; i < 15; i++) {
                const balloon = document.createElement('div');
                balloon.className = 'balloon';
                balloon.style.left = Math.random() * 100 + 'vw';
                balloon.style.animationDuration = 10 + Math.random() * 20 + 's';
                balloon.style.animationDelay = Math.random() * 5 + 's';
                balloon.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                balloon.style.borderRadius = balloonShapes[Math.floor(Math.random() * balloonShapes.length)] || '50%';
                birthdayPage.appendChild(balloon);
                
                // Make balloons clickable
                balloon.addEventListener('click', function() {
                    balloonPopSound.currentTime = 0;
                    balloonPopSound.play();
                    balloon.style.display = 'none';
                    createConfetti(parseInt(balloon.style.left), parseInt(balloon.style.top));
                });
            }
        }
        
        // Create confetti
        function createConfetti(x, y) {
            for (let i = 0; i < 30; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = x + 'px';
                confetti.style.top = y + 'px';
                confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
                confetti.style.animationDuration = 1 + Math.random() * 3 + 's';
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                birthdayPage.appendChild(confetti);
                
                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }
        }

        // Enhanced fireworks with more vibrant colors and bigger blasts
        function createFirework(x, y, color) {
            const firework = document.createElement('div');
            firework.className = 'firework';
            firework.style.left = x + 'px';
            firework.style.bottom = '0';
            firework.style.backgroundColor = color;
            firework.style.boxShadow = `0 0 20px 5px ${color}`;
            firework.style.setProperty('--explode-height', (y - 20) + 'px');
            birthdayPage.appendChild(firework);
            
            // Play firework sound
            fireworkSound.currentTime = 0;
            fireworkSound.volume = 0.7;
            fireworkSound.play();
            
            // Explode after reaching target height
            setTimeout(() => {
                firework.remove();
                explodeFirework(x, y, color);
            }, 1800);
        }
        
        function explodeFirework(x, y, color) {
            const particleCount = 120;
            const colors = [color, lightenColor(color, 30), '#ffffff', lightenColor(color, 50)];
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = x + 'px';
                particle.style.top = y + 'px';
                particle.style.backgroundColor = colors[i % colors.length];
                particle.style.boxShadow = `0 0 15px 3px ${colors[i % colors.length]}`;
                
                const angle = Math.random() * Math.PI * 2;
                const distance = 100 + Math.random() * 150;
                const tx = Math.cos(angle) * distance;
                const ty = Math.sin(angle) * distance;
                
                particle.style.setProperty('--tx', tx + 'px');
                particle.style.setProperty('--ty', -ty + 'px');
                
                const size = 6 + Math.random() * 6;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                
                birthdayPage.appendChild(particle);
                
                setTimeout(() => {
                    particle.remove();
                }, 1500);
            }
        }
        
        function lightenColor(color, percent) {
            return color.replace(')', `, ${percent}%)`).replace('rgb', 'rgba');
        }
        
        function launchRandomFirework() {
            const colors = [
                '#ff00ff', '#00ffff', '#ffff00', 
                '#ff1493', '#00ff00', '#ff4500',
                '#ff00cc', '#33ccff', '#ffcc00',
                '#ff0066', '#00ffcc', '#ff6600'
            ];
            
            const x = Math.random() * window.innerWidth;
            const y = 100 + Math.random() * (window.innerHeight / 1.5);
            const color = colors[Math.floor(Math.random() * colors.length)];
            
            createFirework(x, y, color);
            
            setTimeout(launchRandomFirework, 200 + Math.random() * 600);
        }

        // Create floating hearts for countdown
        function createHearts() {
            const heart = document.createElement('div');
            heart.className = 'heart';
            heart.innerHTML = 'â¤';
            heart.style.left = Math.random() * 300 + 'px';
            heart.style.top = Math.random() * 300 + 'px';
            heart.style.animationDuration = (Math.random() * 3 + 2) + 's';
            heart.style.animationDelay = (Math.random() * 2) + 's';
            countdownContainer.appendChild(heart);
            
            setTimeout(() => {
                heart.remove();
            }, 4000);
        }

        // Start heart animation
        const heartInterval = setInterval(createHearts, 300);

        // Start countdown
        let counter = 3;
        countdownAudio.play();

        const countdownInterval = setInterval(() => {
            countdown.textContent = counter;
            countdownAudio.currentTime = 0;
            countdownAudio.play();
            
            counter--;
            
            if (counter < 0) {
                clearInterval(countdownInterval);
                countdown.style.display = 'none';
                countdownCircle.style.display = 'none';
                
                // Show all buttons
                readyBtn.style.opacity = '1';
                readyBtn.style.transform = 'scale(1)';
                yesBtn.style.opacity = '1';
                yesBtn.style.transform = 'scale(1)';
                noBtn.style.opacity = '1';
                noBtn.style.transform = 'scale(1)';
                
                clearInterval(heartInterval);
            }
        }, 1000);

        // Button click handlers
        readyBtn.addEventListener('click', proceedToCake);
        yesBtn.addEventListener('click', proceedToCake);
        
        noBtn.addEventListener('click', () => {
            // Exit the page
            document.body.innerHTML = '<div style="display:flex;justify-content:center;align-items:center;height:100vh;background:#000;color:#fff;font-size:2rem;font-family:Arial;">Goodbye! The birthday surprise has ended.</div>';
        });

        function proceedToCake() {
            countdownPage.style.display = 'none';
            cakePage.style.display = 'flex';
            
            setTimeout(() => {
                blowInstruction.style.opacity = '1';
                
                let blowTimer;
                let blowCount = 0;
                
                function detectBlow() {
                    blowCount++;
                    if (blowCount > 2) {
                        blowOutCandles();
                        window.removeEventListener('mousemove', handleBlow);
                        window.removeEventListener('touchmove', handleBlow);
                        // Add mobile-specific event removal
                        window.removeEventListener('devicemotion', handleMotion);
                    }
                }
                
                function handleBlow(e) {
                    clearTimeout(blowTimer);
                    blowTimer = setTimeout(detectBlow, 200);
                }
                
                // Mobile device motion detection
                function handleMotion(event) {
                    const acceleration = event.accelerationIncludingGravity;
                    // Check for blowing motion (device moving towards user)
                    if (acceleration.z < -5) {
                        detectBlow();
                    }
                }
                
                window.addEventListener('mousemove', handleBlow);
                window.addEventListener('touchmove', handleBlow);
                
                // Add motion detection for mobile
                if (window.DeviceMotionEvent) {
                    window.addEventListener('devicemotion', handleMotion);
                }
                
                setTimeout(() => {
                    if (flames[0].style.display !== 'none') {
                        blowOutCandles();
                    }
                }, 10000);
            }, 500);
        }

        function blowOutCandles() {
            blowInstruction.style.opacity = '0';
            flames.forEach(flame => {
                flame.style.display = 'none';
            });
            blowSound.play();
            
            setTimeout(() => {
                cakePage.style.display = 'none';
                birthdayPage.style.display = 'flex';
                
                // Create birthday elements
                createBalloons();
                launchRandomFirework();
                
                voiceAudio.play().catch(e => console.log("Voice audio blocked"));
                
                setTimeout(() => {
                    document.getElementById('blessing').style.opacity = '1';
                    document.getElementById('blessing').style.transform = 'translateY(0)';
                }, 500);
                
                birthdayAudio.play().catch(e => console.log("Music blocked"));
            }, 1000);
        }
    </script>
</body>
</html>